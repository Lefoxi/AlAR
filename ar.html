<html>
<head>
	<title>(Заміни на назву своєї роботи)Віртуальна хімічна лабораторія у доповненій реальності</title>
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script>

/
const howmuch=1.4;

let isReaction = false;
let distance = howmuch+1;

//для хранения состояния видимости маркера с заданным номером
let markerVisible = [ false, false, false, false, false, false, false, false, false, false ]; 

//для хранения маркеров
let M = [ null, null, null, null, null, null, null, null, null, null ]; 

//для хранения накладывающихся на маркер объектов - плоскости
let d = [ null, null, null, null, null, null, null, null, null, null ]; 

//для хранения связанных с маркером объектов - видео
let X = [
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null, null, null],
] ;//[ false, false, false, false, false, false, false, false, false, false ]; 

//для хранения координат центров маркеров
let p = [ null, null, null, null, null, null, null, null, null, null ]; 

AFRAME.registerComponent('registerevents', { 
  init: function () { 
    let marker = this.el; 
    marker.addEventListener('markerFound', function() { 
      index = parseInt(marker.id[1])
      markerVisible[ index ] = true; 
      d[index] = document.querySelector("#draw"+index); 
      //X[index] = document.querySelector("#drawX"+index); 
      if(d[index]!=null)
        d[index].setAttribute("visible", "true");
//      console.log("Found M = "+index);   
    }); 
    marker.addEventListener('markerLost', function() { 
      index = parseInt(marker.id[1])
      markerVisible[ index ] = false; 
      if(d[index]!=null)
        d[index].setAttribute("visible", "false");
//      console.log("Lost M = "+index);   
    }); 
  } 
 
}); 

</script>
</head>

<body>
<a-scene 
    vr-mode-ui="enabled: false;"
    renderer="logarithmicDepthBuffer: true;"
    embedded
    arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;"
  >

  <a-assets>
    <video id="video" preload="auto" muted poster="images/images.jpg" loop="false" src="video.mp4"></video>
  </a-assets>



  <a-marker type="pattern" url="markers/pattern.patt" id="M0" registerevents> 
    <a-plane src="images.jpg" rotation="-90 90 0" id="draw0"></a-plane>
    <a-entity material="shader: flat; src: #video" geometry="primitive: plane; width: 0.90; height: 1.60;" position="0 0 0" scale="1.5 1.5 1.5"
				rotation="-90 0 0" id="drawX01" visible="false"></a-entity>	  
  </a-marker> 

 

  <a-entity camera></a-entity> 
  <a-entity run></a-entity> 
</a-scene> 

</body>
</html>